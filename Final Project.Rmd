---
title: "The Bechdel Test Data Analysis"
author: "Claire Burcik and Hannah Park"
date: "`r paste('Last Updated:', Sys.Date())`"
output:
  html_document: default
  word_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = False)
```
### The Bechdel Test Dataset

Over the last few decades, fans and critics alike have increasignly called out gender bias in the film industry. More specifically, many have recognized a lack of depth, low numbers of leads, and sterotypical roles for female characters. One way to measure this bias, first coined by cartoonist Alison Bechdel in 1985, is the Bechdel Test. If a movie passes the Bechdel test, it is said that the movie gave the female charcters a bare minimum level of depth. The test has three criteria that a movie must meet in order to pass. The three criteria are:
1. There are at least two named women
2. They Have a conversation with each other at some point
3. That conversation isn't about a male character

This test is not by any means an offical metric. Like Bechdel's original intention, it is mostly used to poke fun at the lack of female character development in Hollywood. So, when we saw a dataset that evaluated movies based on this test, we thought that it would be a fun data set to analyze.

The data set was sourced from FiveThirtyEight and it combined data from two previous data sets (BechdelTest.com for the Bechdel Test results and Numbers.com for the financial information). The data consists of 1615 realeased from 1990-2013. The attributes in this dataset are release year, Imdb code, Title, Test (states"ok" if movie passed, otherwise states the crteria that made the movie fail. The creators of the dataset also state whether they disagree with the result of the test), Clean test (same as Test but without the creators stating if they disagree), Binary (PASS or FAIL), Domestic Gross, International Gross, Code (year/PASS or FAIL), Budget, Domestic Gross (as of 2013), International Gross (as of 2013), Period Code, and Decade Code.

The research questions we wanted to explore with this data set include:
-Does budget play a role in whether a movie passes or fails the Bechdel Test?
-Does the year the movie was released contribute to if a movie passes or fails the Bechdel Test?
-Of the movies that fail the Bechdel Test, how many fail each criteria?
-How does the domestic and international gross compare to the pass rate of the Bechdel test and the movieâ€™s budget?

### Data Exploration
```{r, include=FALSE}
#ADD CODING STYLE
#reading in the data
bechdel_raw <- read.csv("movies.csv")
View(bechdel_raw)

#loading necessary packages
library(dplyr)
library(ggplot2)
library(kableExtra)
library(janitor)
```

To begin our data exploration, we wanted to take a look at the relationship between budget and the test results. First, we created a box and whisker plot to display the distribution among movies that pass and movies that fail. Because of some extreme outliers, our initial box plot was difficult to read. You couldn't get a good idea of the differences between statistics like the median, Q1, and Q3 for movies that passed vs failed because the intervals on the plot were so large.

```{r}
wrangled_budget<-bechdel_raw %>%
  group_by(clean_test)%>%
  select(clean_test, binary, budget)

#basic pass/fail plot
ggplot(data=wrangled_budget,
  mapping=aes(x = budget, y = binary)) + #binary=pass/fail test results
  #made boxplots have horizontal orientation-->more appealing to the eye
  labs(x="Budget ($)",
       y="Test Result",
       title="Distribution of Budget for Movies that Pass vs Fail")+ #tidying up labels
  geom_boxplot(fill = "#112446") +
  theme_minimal()
```
To resolve this issue, we added a line of code that excluded outliers from the visualization. From this plot, we can see that, overall, the movies that failed the test had slightly higher summary statistics for their budgets.

In addition, we wanted to explore further and compare the distributions of budget among movies that passed, movies that failed due to having no lead women characters, films that failed due to the female characters not talking to each other, movies that failed due to the conversations being about men, and those that were considered dubious. This visual painted a slightly different picture. For all criteria except for no talk, the median budgets varied by a small interval. However, the Q3 values for all of the failing criteria were greater than the movies that passed (ok). 

```{r}
ggplot(data=wrangled_budget,
  mapping=aes(x = budget, y = binary)) + #binary=pass/fail test results
  #made boxplots have horizontal orientation-->more appealing to the eye
  labs(x="Budget ($)",
       y="Test Results",
       title="Distribution of Budget for Movies that Pass vs Fail")+ #tidying up labels
  geom_boxplot(fill = "#112446") +
  theme_minimal()+
  coord_cartesian(xlim = quantile(wrangled_budget$budget, c(0.1, 0.9)))
#more detailed
ggplot(data=wrangled_budget, 
  mapping=aes(x = budget, y = clean_test))+
  #swapped out y axis value "binary" for "clean_test"
  #gives distribution of budget across categories (pass or fail(which criteria it failed))
  labs(x="Budget ($)",
       y="Test Results",
       title="Distribution of Budget for Movies that Pass vs Fail (Detailed)")+  #tidying up labels
  geom_boxplot(fill = "#EF562D")+ #changing color to orange
  theme_minimal() +
  coord_cartesian(xlim = quantile(wrangled_budget$budget, c(0.1, 0.9)))
```
```{r}
bechdel_raw<- read.table (
  file = "/Users/hpark/Desktop/movies.csv",
  fill = TRUE,
  header = TRUE,
  quote = "",
  sep = ","
)
  
  
#Load the packages 
library(magrittr)-
library(dplyr)-
library(ggplot2)

#creates a table that only has the year and binary column if the movie passed or failed
wrangled_year_pass_fail<- bechdel_raw %>%
  group_by(year) %>%
  filter(binary = "FAIL" | binary = "PASS")%>% #only included rows that have Pass or-Fail in the binary column~
  select(year,binary) #only included the columns year and binary
  
  
#counts the frequency based on the year on if it passed or failed
count_pass_fail <- wrangled_year_pass_fail %>% group_by(year,binary) %>% summarise(count=n())

#graphs the data as a stacked box plot 
ggplot(count_pass_fail,
  aes(fill=binary, y=count, x=year))+ geom_bar(position='stack', stat='identity')+
  labs(title = "Year of Release Compared to if the Movie Passed or Failed",
       x = "Year",
       y = "Total Movies per year")
```








